<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>åº—å®¶è¨Šæ¯è™•ç†å·¥å…·</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.container{max-width:1200px;margin:0 auto;background:rgba(255,255,255,.95);border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);backdrop-filter:blur(10px);overflow:hidden}
.header{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:#fff;padding:30px;text-align:center}
.header h1{font-size:2.2rem;margin-bottom:10px;text-shadow:0 2px 4px rgba(0,0,0,.3)}
.header p{opacity:.9}
.content{padding:30px}
.input-section{margin-bottom:30px}
.input-section label{display:block;font-size:1.1rem;font-weight:700;margin-bottom:10px;color:#333}
.input-section textarea{width:100%;height:220px;padding:15px;border:2px solid #e0e0e0;border-radius:10px;font-size:1rem;resize:vertical;transition:border-color .3s}
.input-section textarea:focus{outline:none;border-color:#4facfe;box-shadow:0 0 10px rgba(79,172,254,.3)}
.button-section{display:flex;gap:14px;margin-bottom:24px;justify-content:center;flex-wrap:wrap}
.btn{padding:12px 22px;font-size:1rem;font-weight:700;border:none;border-radius:10px;cursor:pointer;transition:all .2s;text-transform:uppercase;letter-spacing:.5px}
.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
.btn-secondary{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff}
.btn-copy{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);color:#fff}
.btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(0,0,0,.2)}
.result-title{font-size:1.1rem;font-weight:700;margin:10px 0;color:#333;border-bottom:2px solid #4facfe;padding-bottom:6px}
.result-box{background:#f8f9fa;border:2px solid #e9ecef;border-radius:10px;padding:16px;min-height:120px;font-family:"Courier New",monospace;white-space:pre-wrap;line-height:1.6}
@media(max-width:768px){.button-section{flex-direction:column}.content{padding:20px}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸª åº—å®¶è¨Šæ¯è™•ç†å·¥å…·</h1>
    <p>æ¨¡ç³Šæ¯”å° Ã— æ™ºæ…§æ•´ç† Ã— ä¸€éµè¤‡è£½</p>
  </div>
  <div class="content">
    <div class="input-section">
      <label for="originalMessage">åŸå§‹åº—å®¶è¨Šæ¯ï¼š</label>
      <textarea id="originalMessage" placeholder="æŠŠæ•´æ®µè²¼é€²ä¾†ï¼Œä¾‹ï¼š\nWave 23:40 38äººâ€¦"></textarea>
    </div>
    <div class="button-section">
      <button class="btn btn-primary" onclick="filterMessage()">ç¯©é¸çµæœ</button>
      <button class="btn btn-secondary" onclick="generateReport()">ç”Ÿæˆå ±å‘Š</button>
    </div>

    <div class="result-title">ç¯©é¸çµæœï¼š</div>
    <div id="filteredResult" class="result-box"></div>

    <div class="result-title">ATT å ±å‘Šï¼š</div>
    <div id="attReportBox" class="result-box"></div>
    <button class="btn btn-copy" onclick="copyReport('attReportBox')">ğŸ“‹ è¤‡è£½ ATT å ±å‘Š</button>

    <div class="result-title">A19 å ±å‘Šï¼š</div>
    <div id="a19ReportBox" class="result-box"></div>
    <button class="btn btn-copy" onclick="copyReport('a19ReportBox')">ğŸ“‹ è¤‡è£½ A19 å ±å‘Š</button>
  </div>
</div>

<script>
// ====== æ¨¡ç³Šæ¯”å°é—œéµå­— -> æ­£å¼åº—å ======
const storeAliases = {
  "wave":"WAVE å¤œåº—","ai":"AI å¤œåº—","belles":"BELLES","frank":"FRANK","door":"The door","rule":"One rule","kara":"Kara Kara","social":"Social","wtnc":"WTNC","babylon":"BABYLON é…’å§","sing":"èšå”±KTVä¿¡ç¾©åº—","æ–°æ‘":"æ–°æ‘",
  "ruff":"Ruff å¤œåº—","obsi":"OBSI","dd":"DD å¤œåº—","barcode":"BARCODE é…’å§","underlink":"UNDERLINK","sleep":"Sleep No More","mars":"Mars","cafe from mars":"Mars","la fin":"la fin","fakesober":"Fakesober"
};
const attStores=[{name:"WAVE å¤œåº—",capacity:"805äºº"},{name:"AI å¤œåº—",capacity:"750äºº"},{name:"BELLES",capacity:""},{name:"èšå”±KTVä¿¡ç¾©åº—",capacity:""},{name:"BABYLON é…’å§",capacity:""},{name:"FRANK",capacity:""},{name:"The door",capacity:""},{name:"One rule",capacity:""},{name:"Kara Kara",capacity:""},{name:"WTNC",capacity:""},{name:"æ–°æ‘",capacity:""},{name:"Social",capacity:""}];
const a19Stores=[{name:"Ruff å¤œåº—",capacity:"390äºº",default:"æœªç‡Ÿæ¥­"},{name:"OBSI",capacity:"456äºº",default:"æœªç‡Ÿæ¥­"},{name:"DD å¤œåº—",capacity:"223äºº",default:"æœªç‡Ÿæ¥­"},{name:"BARCODE é…’å§",capacity:"",default:"æœªç‡Ÿæ¥­"},{name:"UNDERLINK",capacity:"",default:"æœªç‡Ÿæ¥­"},{name:"Sleep No More",capacity:"",default:"æ‰“çƒŠ"},{name:"la fin",capacity:"",default:"æœªç‡Ÿæ¥­"},{name:"Fakesober",capacity:"",default:"æ‰“çƒŠ"},{name:"Mars",capacity:"",default:"æ‰“çƒŠ"}];

function filterMessage(){
  let msg=document.getElementById('originalMessage').value;
  msg=msg.replace(/\d{1,2}[ï¼š:]\d{2}\s*æ‰“çƒŠ/g,'').replace(/æ‰“çƒŠ\s*\d{1,2}[ï¼š:]\d{2}/g,'').replace(/\d{1,2}[ï¼š:]\d{2}/g,'').replace(/ç„¡å…„å¼Ÿå®¢?/g,'').replace(/[ï¼ˆ(][^ï¼‰)]*[ï¼‰)]/g,'').replace(/(\d+)[ä½äºº](?!.*sing!go)/gi,'$1').replace(/[ï¼š:]/g,'').replace(/\s+/g,' ').trim();
  document.getElementById('filteredResult').textContent=msg;
}
function normalizeName(raw){const lower=raw.toLowerCase();for(const key in storeAliases){if(lower.includes(key.toLowerCase()))return storeAliases[key];}return null;}
function extractStatus(line){const lower=line.toLowerCase();if(lower.includes('ç„¡ç‡Ÿæ¥­'))return 'æœªç‡Ÿæ¥­';const withoutTimes=line.replace(/\d{1,2}[ï¼š:]\d{2}/g,'');if(lower.includes('sing')){const m=withoutTimes.match(/(\d+é–“\d+äºº)/);if(m)return m[1];}let m=withoutTimes.match(/(\d+)\s*[ä½äºº]/);if(!m)m=withoutTimes.match(/(?:^|[^\d])(\d{1,4})(?!\d)/);if(m)return (m[1]||m[0]).replace(/[^\d]/g,'');if(lower.includes('æ‰“çƒŠ'))return 'æ‰“çƒŠ';return 'é è¨­';}
function generateReport(){
  const original=document.getElementById('originalMessage').value;
  const storeData={};const lines=original.split('\n');
  for(const rawLine of lines){const line=rawLine.trim();if(!line)continue;const namePart=line.split(/[ï¼š:]/)[0];const normalized=normalizeName(namePart);if(!normalized)continue;const status=extractStatus(line);storeData[normalized]=status;}
  let attReport="ä¸‰å¼µæ‰€å ±å‘Šï¼š\nã€ŠATTå¤§æ¨“å…§åº—å®¶äººæ•¸å ±å‘Šï¼Œå®ˆæœ›ä»£è™Ÿ321ã€‹\n";
  attStores.forEach(s=>{let status=storeData[s.name]??"é è¨­";if(/^\d+$/.test(status))status+="äºº";const cap=s.capacity?`(å®¹ç•™äººæ•¸ï¼š${s.capacity})`:"";attReport+=`${s.name}ï¼š${status}${cap}\n`;});
  let a19Report="ä¸‰å¼µæ‰€å ±å‘Šï¼š\nã€ŠA19å¤§æ¨“å…§åº—å®¶äººæ•¸å ±å‘Šï¼Œå®ˆæœ›ä»£è™Ÿ320ã€‹\n";
  a19Stores.forEach(s=>{let status=storeData[s.name]??s.default;if(/^\d+$/.test(status))status+="äºº";const cap=s.capacity?`ï¼ˆå®¹ç•™äººæ•¸ï¼š${s.capacity}ï¼‰`:"";a19Report+=`${s.name}ï¼š${status}${cap}\n`;});
  document.getElementById('attReportBox').textContent=attReport;
  document.getElementById('a19ReportBox').textContent=a19Report;
}
function copyReport(id){const text=document.getElementById(id).textContent;navigator.clipboard.writeText(text).then(()=>alert("ğŸ“‹ å ±å‘Šå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼"));}
</script>
</body>
</html>
